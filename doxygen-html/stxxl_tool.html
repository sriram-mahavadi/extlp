<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>ExtLP: stxxl_tool Collection</title>

<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>

</head>
<body>
<div id="top"><!-- do not remove this div! -->


<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  
  
  <td style="padding-left: 0.5em;">
   <div id="projectname">ExtLP
   &#160;<span id="projectnumber">1.0-dev</span>
   </div>
   
  </td>
  
  
  
 </tr>
 </tbody>
</table>
</div>

<!-- Generated by Doxygen 1.7.6.1 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="dynsections.js"></script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li><a href="examples.html"><span>Examples</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div>
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
  initNavTree('stxxl_tool.html','');
</script>
<div id="doc-content">
<div class="header">
  <div class="headertitle">
<div class="title">stxxl_tool Collection </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><dl class="author"><dt><b>Authors:</b></dt><dd>Timo Bingmann (2013)</dd></dl>
<p>The <code>stxxl_tool</code> accompanies the source code and also binary distributions of STXXL. It contains multiple subprograms that can be used for benchmarking basic functionality of the library. We describe only some of the benchmarks and functions in this document.</p>
<p><code>stxxl_tool</code> has a verbose command line help and descriptions of all subtools are available there. Try </p>
<div class="fragment"><pre class="fragment">
$ stxxl_tool
(prints all available subtools)
$ stxxl_tool &lt;subtool&gt; --help
</pre></div><h2><a class="anchor" id="create_files"></a>
create_files</h2>
<p>To pre-create files one can issue a command similar to: </p>
<div class="fragment"><pre class="fragment">
$ stxxl_tool create_files 10gib /data01/stxxl.tmp
</pre></div><h2><a class="anchor" id="benchmark_disks"></a>
Benchmark Disk Bandwidth</h2>
<p>Maybe the most important tool for testing the I/O performance of an experimental platform is <b><code>stxxl_tool benchmark_disks</code></b>.</p>
<p>This subtool will read the disk configuration file (.stxxl) and open all parallel disk files. Then the specified amount of data is written and read on the configured disks using the block manager and file I/O layers. The transfer speed is outputted for every batch for processed blocks.</p>
<p>An example run looks as follows: </p>
<div class="fragment"><pre class="fragment">
$ stxxl_tool benchmark_disks 10gib -b 4
Parameter size set to 10737418240.
Option -b, --batch set to 4.
[STXXL-MSG] STXXL v1.4.0 (prerelease)
[STXXL-MSG] Disk '/data01/stxxl' is allocated, space: 228881 MiB, I/O implementation: syscall
[STXXL-MSG] Disk '/data02/stxxl' is allocated, space: 228881 MiB, I/O implementation: syscall
[STXXL-MSG] In total 2 disks are allocated, space: 457763 MiB
# Batch size: 33554432 (32.000 MiB)  (4 blocks of 8388608 (8.000 MiB) ) using randomized cycling striping
Offset          0 MiB: 170.6 MiB/s write, 108.9 MiB/s read
Offset         32 MiB: 164.6 MiB/s write, 108.4 MiB/s read
Offset         64 MiB: 158.6 MiB/s write, 102.0 MiB/s read
Offset         96 MiB: 143.8 MiB/s write, 116.3 MiB/s read
Offset        128 MiB: 156.3 MiB/s write, 130.7 MiB/s read
Offset        160 MiB: 168.3 MiB/s write,  99.3 MiB/s read
Offset        192 MiB: 156.6 MiB/s write, 109.2 MiB/s read
Offset        224 MiB: 159.9 MiB/s write, 107.7 MiB/s read
Offset        256 MiB: 156.0 MiB/s write,  88.7 MiB/s read
Offset        288 MiB: 149.6 MiB/s write, 109.7 MiB/s read
Offset        320 MiB: 138.3 MiB/s write, 113.2 MiB/s read
[...]
</pre></div><h2><a class="anchor" id="benchmark_sort"></a>
Benchmark Sorting Methods</h2>
<p>The second performance metric of an experimental platform is how fast STXXL can sort on it. This is measured by the <code>stxxl_tool benchmark_sort</code> subtool.</p>
<p>This subtool performs stxxl::sort, stxxl::ksort and stream::sort on uint32 pairs, uint64 pairs and a larger struct of 64 bytes.</p>
<p>An example run looks as follows: </p>
<div class="fragment"><pre class="fragment">
$ stxxl_tool benchmark_sort 20gib -M 1gib
Parameter size set to 21474836480.
Option -M, --ram set to 1073741824.
[STXXL-MSG] STXXL v1.4.0 (prerelease) + gnu parallel(20120301)
[STXXL-MSG] Disk '/dev/sdb1' is allocated, space: 915527 MiB, I/O implementation: syscall
[STXXL-MSG] Disk '/dev/sdc1' is allocated, space: 915527 MiB, I/O implementation: syscall
[STXXL-MSG] Disk '/dev/sdd1' is allocated, space: 915527 MiB, I/O implementation: syscall
[STXXL-MSG] Disk '/dev/sde1' is allocated, space: 915527 MiB, I/O implementation: syscall
[STXXL-MSG] In total 4 disks are allocated, space: 3662109 MiB
#!!! running sorting test with pair of uint32 = 8 bytes.
# materialize random_stream into vector of size 2684354560
finished in 46.9271 seconds @ 436.421 MiB/s
# stxxl::sort vector of size 2684354560
finished in 256.048 seconds @ 79.9849 MiB/s
# stxxl::ksort vector of size 2684354560
finished in 356.964 seconds @ 57.3727 MiB/s
# stxxl::stream::sort of size 2684354560
finished in 213.102 seconds @ 96.1041 MiB/s

#!!! running sorting test with pair of uint64 = 16 bytes.
# materialize random_stream into vector of size 1342177280
finished in 95.5571 seconds @ 214.322 MiB/s
# stxxl::sort vector of size 1342177280
finished in 222.727 seconds @ 91.9513 MiB/s
# stxxl::ksort vector of size 1342177280
finished in 265.456 seconds @ 77.1502 MiB/s
# stxxl::stream::sort of size 1342177280
finished in 200.357 seconds @ 102.218 MiB/s

#!!! running sorting test with struct of 64 bytes = 64 bytes.
# materialize random_stream into vector of size 335544320
finished in 46.9293 seconds @ 436.401 MiB/s
# stxxl::sort vector of size 335544320
finished in 215.798 seconds @ 94.9035 MiB/s
# stxxl::ksort vector of size 335544320
finished in 222.5 seconds @ 92.0451 MiB/s
# stxxl::stream::sort of size 335544320
finished in 112.607 seconds @ 181.871 MiB/s
</pre></div><p>As stxxl::sort and stxxl::ksort perform about 4 read/write steps on the data, the sorting speed is about 1/4 of the scanning speed. On the other hand, stream::sort performs only 2 read/write steps to create a sorted stream from an unsorted one. Thus the stream sorting speed is about 1/2 of scanning speed. </p>
</div></div><!-- contents -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Defines</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div>
  <div id="nav-path" class="navpath">
    <ul>

    <li class="footer">Generated on Sat Jun 14 2014 01:55:17 for ExtLP by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.7.6.1 </li>
   </ul>
 </div>


</body>
</html>
